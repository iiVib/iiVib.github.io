<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ูุนุจุฉ ุงูุดุฎุตูุงุช - ุชุณุฌูู ุงูุฏุฎูู</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- ุดุงุดุฉ ุงูุจุฏุงูุฉ -->
    <div id="startScreen" class="screen active">
        <div class="start-container">
            <div class="start-header">
                <h1>๐ฎ ูุนุจุฉ ุงุฎุชูุงุฑ ุงูุดุฎุตูุงุช</h1>
                <p>ุงูุนุจ ูุน ุฃุตุฏูุงุฆู ุฃูููุงูู</p>
            </div>

            <div class="start-buttons">
                <button class="start-btn create-btn" onclick="createGame()">
                    <span class="btn-icon">๐</span>
                    <span class="btn-text">ุฅูุดุงุก ุบุฑูุฉ ุฌุฏูุฏุฉ</span>
                </button>

                <button class="start-btn join-btn" onclick="showJoinForm()">
                    <span class="btn-icon">๐</span>
                    <span class="btn-text">ุงูุงูุถูุงู ุฅูู ุบุฑูุฉ</span>
                </button>
            </div>
        </div>
    </div>

    <!-- ุดุงุดุฉ ุงูุงูุชุธุงุฑ (ููุดุฆ ุงูุบุฑูุฉ) -->
    <div id="waitingScreen" class="screen">
        <div class="waiting-container">
            <div class="waiting-header">
                <h2>โณ ูู ุงูุชุธุงุฑ ูุงุนุจ ุขุฎุฑ</h2>
            </div>

            <div class="code-section">
                <p class="code-label">ุดุงุฑู ูุฐุง ุงูููุฏ ูุน ุตุฏููู:</p>
                <div class="code-display">
                    <input type="text" id="gameCode" readonly class="code-input">
                    <button class="copy-btn" onclick="copyCode()">๐ ูุณุฎ</button>
                </div>
            </div>

            <div class="player-info">
                <p>ุฃูุช ุงููุงุนุจ ุงูุฃูู ๐ค</p>
                <p id="statusMessage">ูู ุงูุชุธุงุฑ ุงููุงุนุจ ุงูุซุงูู...</p>
            </div>

            <button class="cancel-btn" onclick="goBack()">ุงูุนูุฏุฉ</button>
        </div>
    </div>

    <!-- ุดุงุดุฉ ุงูุงูุถูุงู -->
    <div id="joinScreen" class="screen">
        <div class="join-container">
            <div class="join-header">
                <h2>ุงูุงูุถูุงู ุฅูู ุบุฑูุฉ</h2>
            </div>

            <div class="join-form">
                <input type="text" id="joinCode" placeholder="ุฃุฏุฎู ุงูููุฏ ููุง..." class="code-input">
                <button class="join-btn-form" onclick="joinGame()">ุงูุงูุถูุงู ๐ฎ</button>
            </div>

            <button class="cancel-btn" onclick="goBack()">ุงูุนูุฏุฉ</button>
        </div>
    </div>

    <!-- ุดุงุดุฉ ุชุญุฏูุฏ ุงูุฏูุฑ -->
    <div id="roleScreen" class="screen">
        <div class="role-container">
            <div class="role-header">
                <h2>ุงุฎุชุฑ ุฏูุฑู ูู ุงููุนุจุฉ</h2>
                <p>ููุฏ ุงูุบุฑูุฉ: <span id="roleGameCode"></span></p>
            </div>

            <div class="role-buttons">
                <button class="role-btn player1-role" onclick="selectRole(1)">
                    <span class="role-emoji">๐ค</span>
                    <span class="role-text">ุงููุงุนุจ ุงูุฃูู</span>
                </button>

                <button class="role-btn player2-role" onclick="selectRole(2)">
                    <span class="role-emoji">๐ฅ</span>
                    <span class="role-text">ุงููุงุนุจ ุงูุซุงูู</span>
                </button>
            </div>

            <button class="cancel-btn" onclick="goBack()">ุงูุนูุฏุฉ</button>
        </div>
    </div>

    <script>
        let currentGameCode = null;
        let currentRole = null;

        // ุฏูุงู ุฅุฏุงุฑุฉ ุงูุดุงุดุงุช
        function showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            document.getElementById(screenId).classList.add('active');
        }

        // ุฅูุดุงุก ูุนุจุฉ ุฌุฏูุฏุฉ
        function createGame() {
            currentGameCode = generateGameCode();
            currentRole = 1;
            document.getElementById('gameCode').value = currentGameCode;
            showScreen('waitingScreen');
        }

        // ุชูููุฏ ููุฏ ุนุดูุงุฆู
        function generateGameCode() {
            return Math.random().toString(36).substring(2, 8).toUpperCase();
        }

        // ูุณุฎ ุงูููุฏ
        function copyCode() {
            const codeInput = document.getElementById('gameCode');
            codeInput.select();
            document.execCommand('copy');
            alert('ุชู ูุณุฎ ุงูููุฏ! ๐');
        }

        // ุนุฑุถ ูููุฐุฌ ุงูุงูุถูุงู
        function showJoinForm() {
            showScreen('joinScreen');
        }

        // ุงูุงูุถูุงู ุฅูู ูุนุจุฉ
        function joinGame() {
            const code = document.getElementById('joinCode').value.trim().toUpperCase();
            if (code.length === 6) {
                currentGameCode = code;
                document.getElementById('roleGameCode').textContent = code;
                showScreen('roleScreen');
            } else {
                alert('ุงูุฑุฌุงุก ุฅุฏุฎุงู ููุฏ ุตุญูุญ (6 ุฃุญุฑู)');
            }
        }

        // ุงุฎุชูุงุฑ ุงูุฏูุฑ ูุงูุฐูุงุจ ููุนุจุฉ
        function selectRole(role) {
            currentRole = role;
            // ุญูุธ ุงูุจูุงูุงุช ูู sessionStorage
            sessionStorage.setItem('gameCode', currentGameCode);
            sessionStorage.setItem('playerRole', currentRole);
            // ุงูุงูุชูุงู ุฅูู ุตูุญุฉ ุงููุนุจุฉ
            window.location.href = 'game.html';
        }

        // ุงูุนูุฏุฉ ููุดุงุดุฉ ุงูุณุงุจูุฉ
        function goBack() {
            currentGameCode = null;
            currentRole = null;
            showScreen('startScreen');
            document.getElementById('joinCode').value = '';
        }
    </script>
</body>
</html>
